import{r as l,j as e,a as w,b as H}from"./app-CyaN6xsP.js";import{A as L}from"./AdminLayout-PFMD-RUe.js";import{X as T}from"./index.es-BmtGfkdq.js";import{h as N}from"./moment-C5S46NFB.js";import{M as n}from"./Modal-iN6Zw-8X.js";import{T as Y}from"./Table-DnZwWSpL.js";import{B as x}from"./Button-BgJxX_0z.js";/* empty css            */import"./index-CEILWtln.js";import"./emotion-unitless.esm-sScrWPmR.js";import"./ThemeProvider-DfRC6yqX.js";import"./setPrototypeOf-CL05xPcL.js";import"./divWithClassName-CvjRewxl.js";const B="_search_7vw8k_17",U="_table_7vw8k_30",A="_tr_7vw8k_30",M="_th_7vw8k_30",R="_td_7vw8k_34",F="_img_7vw8k_38",a={"form-search":"_form-search_7vw8k_1","icon-search":"_icon-search_7vw8k_9",search:B,table:U,tr:A,th:M,td:R,img:F};function Z({ulasans:i}){const[y,j]=l.useState(!1),[v,d]=l.useState(!1),[r,u]=l.useState(!1),[p,f]=l.useState(i),[c,C]=l.useState(""),g=()=>j(!1),k=(s,t)=>{s.preventDefault(),j(!0),u(t)},h=()=>d(!1),b=(s,t)=>{s.preventDefault(),d(!0),u(t)},_=(s,t=!1)=>{let o=[];for(let m=0;m<s;m++)o.push(e.jsx("box-icon",{type:"solid",name:"star",color:"#f16211",size:t?"lg":"sm"},m));return o},D=[{name:"Nama",selector:s=>s.user.username},{name:"Jenis Layanan",selector:s=>s.jenis_layanan},{name:"Rating",selector:s=>s.rating,cell:s=>e.jsx("div",{children:_(s.rating)})},{name:"tanggal",selector:s=>N(s.created_at).format("DD-MM-YYYY HH:mm:ss")},{name:"Action",cell:s=>e.jsxs(e.Fragment,{children:[e.jsx(w,{href:"#",onClick:t=>k(t,s),children:e.jsx("box-icon",{name:"info-circle",type:"solid",color:"#f16211"})}),e.jsx(w,{href:"#",onClick:t=>b(t,s),style:{color:"#f16211"},children:e.jsx("box-icon",{name:"trash",type:"solid",color:"#f16211"})})]})}];l.useState(null);const S=async()=>{try{const s=await H.delete(route("admin.ulasan.delete",{ulasan:r.id}),{headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content"),"Content-Type":"application/json",Accept:"application/json"}});console.log("Berhasil dihapus",s),d(!1);const t=p.filter(o=>o.id!==r.id);f(t)}catch(s){console.error("Gagal menghapus",s)}};return l.useEffect(()=>{const s=i.filter(t=>t.user.nama.toLowerCase().includes(c.toLowerCase())||t.jenis_layanan.toLowerCase().includes(c.toLowerCase())||t.rating.toString().includes(c)||t.review&&t.review.toLowerCase().includes(c.toLowerCase()));f(s)},[c,i]),e.jsxs(L,{title:"Ulasan Pengguna",children:[e.jsxs("div",{className:"table-wrapper",children:[e.jsx("div",{className:"sub-wrapper",children:e.jsxs("form",{action:"#",className:a["form-search"],children:[e.jsx("span",{className:a["icon-search"],children:e.jsx("box-icon",{name:"search",color:"#f16211"})}),e.jsx("input",{type:"text",name:"search",id:"search",placeholder:"Cari Booking",autoComplete:"off",className:a.search,value:c,onChange:s=>C(s.target.value)})]})}),e.jsx(T,{columns:D,data:p,pagination:!0})]}),e.jsxs(n,{size:"lg",show:y,onHide:g,children:[e.jsx(n.Header,{closeButton:!0,children:e.jsx(n.Title,{children:"Detail Ulasan"})}),e.jsx(n.Body,{children:e.jsxs(Y,{className:a.table,children:[e.jsxs("tr",{className:a.tr,children:[e.jsx("th",{className:a.th,children:"Nama"}),e.jsx("td",{children:":"}),e.jsx("td",{children:r&&r.user.nama})]}),e.jsxs("tr",{className:a.tr,children:[e.jsx("th",{className:a.th,children:"Jenis Layanan"}),e.jsx("td",{className:a.td,children:":"}),e.jsx("td",{children:r&&r.jenis_layanan})]}),e.jsxs("tr",{className:a.tr,children:[e.jsx("th",{className:a.th,children:"Rating"}),e.jsx("td",{className:a.td,children:":"}),e.jsx("td",{children:r&&_(r.rating,!0)})]}),e.jsxs("tr",{className:a.tr,children:[e.jsx("th",{className:a.th,children:"Tanggal"}),e.jsx("td",{className:a.td,children:":"}),e.jsx("td",{children:r&&N(r.created_at).format("DD-MM-YYYY HH:mm:ss")})]}),e.jsxs("tr",{className:a.tr,children:[e.jsx("th",{className:a.th,children:"Review"}),e.jsx("td",{className:a.td,children:":"}),e.jsx("td",{children:r&&r.review})]}),e.jsxs("tr",{className:a.tr,children:[e.jsx("th",{className:a.th,children:"Foto"}),e.jsx("td",{className:a.td,children:":"}),e.jsx("td",{children:r&&r.foto_ulasans.map(s=>e.jsx("img",{src:"/storage/"+s.foto,alt:s,className:a.img,width:150,style:{display:"inline"}},s))})]})]})}),e.jsx(n.Footer,{children:e.jsx(x,{variant:"secondary",onClick:g,children:"Tutup"})})]}),e.jsxs(n,{show:v,onHide:h,children:[e.jsx(n.Header,{closeButton:!0,children:e.jsx(n.Title,{children:"Hapus Ulasan"})}),e.jsx(n.Body,{children:e.jsxs("p",{children:["Apakah anda yakin ingin menghapus ulasan:"," ",e.jsx("b",{children:r&&r.user.nama}),"?"]})}),e.jsxs(n.Footer,{children:[e.jsx(x,{variant:"secondary",onClick:h,children:"Tutup"}),e.jsx("form",{onSubmit:S,children:e.jsx(x,{type:"submit",variant:"primary",onClick:h,style:{backgroundColor:"#f16211",borderColor:"#f16211"},children:"Ya, Hapus"})})]})]})]})}export{Z as default};
