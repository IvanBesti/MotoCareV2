import{r,y as I,j as e}from"./app-CyaN6xsP.js";import{U as L}from"./UserLayout-DKIt1O_v.js";/* empty css            */import"./index-CEILWtln.js";function J({bookings:l,users:C,invoices:R,auth:i}){var x,c,o,m,h,j,y,p,u;const[N,b]=r.useState(null),[a,f]=r.useState(null),[n,g]=r.useState(""),[v,S]=r.useState(l);r.useEffect(()=>{i.user?S(l.filter(s=>s.user_id===i.user.id)):I.visit(route("auth"),{method:"GET",headers:{"Content-type":"Application/json"}})},[i.user,l]);const w=s=>{b(s);const t=l.find(_=>_.id===s);t?f(t):console.error("Booking tidak ditemukan")},T=s=>{g(s.target.value.toLowerCase())},d=v.filter(s=>s.id.toString().toLowerCase().includes(n)).sort((s,t)=>t.id-s.id);return e.jsx(L,{auth:i,children:e.jsxs("main",{className:"py-8 px-4 lg:px-16 mb-20",children:[e.jsx("h1",{className:"mt-4 text-6xl font-bold text-center text-gray-200 mb-12",children:"RIWAYAT SERVIS"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-gray-100 p-6 rounded-lg shadow-md",children:[e.jsx("h3",{className:"text-4xl font-semibold mb-4 text-gray-800",children:"Laporan Kondisi Motor"}),e.jsx("div",{className:"relative mb-4",children:e.jsx("input",{type:"text",placeholder:"Cari Riwayat Booking",value:n,onChange:T,className:"w-full text-2xl py-2 px-4 border rounded-lg focus:ring focus:ring-orange-300 focus:outline-none"})}),e.jsx("ul",{className:"space-y-2",children:d.map((s,t)=>e.jsxs("li",{className:`p-4 border rounded-lg cursor-pointer ${N===s.id?"bg-orange-100 border-orange-500":"bg-white hover:bg-gray-50"}`,onClick:()=>w(s.id),children:["Booking ",d.length-t]},s.id))})]}),e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg",children:[e.jsxs("h3",{className:"text-4xl font-bold mb-6 text-gray-800",children:[((x=a==null?void 0:a.katalog)==null?void 0:x.merk)||"Merk tidak tersedia"," ","-"," ",((c=a==null?void 0:a.jenis_layanan)==null?void 0:c.jenis_layanan)||"Jenis layanan tidak tersedia"]}),e.jsx("table",{className:"w-full text-left border-separate border-spacing-4",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"py-4 text-2xl font-semibold",children:"Nama Pemilik"}),e.jsx("td",{className:"py-4 text-2xl",children:((o=a==null?void 0:a.user)==null?void 0:o.nama)||"Nama tidak tersedia"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-4 text-2xl font-semibold",children:"No. Polisi"}),e.jsx("td",{className:"py-4 text-2xl",children:(a==null?void 0:a.nomor_polisi)||"Tidak tersedia"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-4 text-2xl font-semibold",children:"Merk"}),e.jsx("td",{children:a&&a.katalog.merk+" "+a.katalog.model||"Tidak tersedia"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-4 text-2xl font-semibold",children:"Jenis Layanan"}),e.jsx("td",{className:"py-4 text-2xl",children:((m=a==null?void 0:a.jenis_layanan)==null?void 0:m.jenis_layanan)||"Tidak tersedia"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-4 text-2xl font-semibold",children:"Status"}),e.jsxs("td",{className:"py-4 text-2xl",children:[(a==null?void 0:a.status)||"Diproses"," ","-"," ",((h=a==null?void 0:a.invoice)==null?void 0:h.status)||"Unpaid"]})]})]})}),e.jsx("hr",{className:"my-8 border-gray-500 border-2"}),e.jsx("h3",{className:"text-3xl font-bold mb-6 text-gray-800",children:"Invoice"}),e.jsxs("table",{className:"w-full border-separate border-spacing-4",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-4 text-2xl text-left",children:"Layanan"}),e.jsx("th",{className:"py-4 text-2xl text-left",children:"Harga"}),e.jsx("th",{className:"py-4 text-2xl text-left",children:"Jumlah"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"py-4 text-2xl",children:((j=a==null?void 0:a.jenis_layanan)==null?void 0:j.jenis_layanan)||"Tidak tersedia"}),e.jsx("td",{className:"py-4 text-2xl",children:((y=a==null?void 0:a.jenis_layanan)==null?void 0:y.harga)||"Tidak tersedia"}),e.jsx("td",{className:"py-4 text-2xl",children:"1"})]}),(p=a==null?void 0:a.invoice)!=null&&p.items?a.invoice.items.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"py-4 text-2xl",children:s.produk.nama_produk}),e.jsx("td",{className:"py-4 text-2xl",children:s.harga.toLocaleString("id-ID",{style:"currency",currency:"IDR"})}),e.jsx("td",{className:"py-4 text-2xl",children:s.jumlah})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"py-4 text-2xl text-center",children:"Invoice belum tersedia"})})]})]}),e.jsx("hr",{className:"my-8 border-gray-500 border-2"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-3xl font-bold text-gray-800",children:"Total Bayar:"}),e.jsx("span",{className:"text-3xl font-bold text-gray-800",children:a!=null&&a.invoice?a.invoice.items.reduce((s,t)=>s+t.jumlah*t.harga,((u=a==null?void 0:a.jenis_layanan)==null?void 0:u.harga)||0).toLocaleString("id-ID",{style:"currency",currency:"IDR"}):"Tidak tersedia"})]})]})]})]})})}export{J as default};
