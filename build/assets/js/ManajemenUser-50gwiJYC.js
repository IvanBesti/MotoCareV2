import{q as E,r as a,y as N,j as e,a as i,b as U}from"./app-CyaN6xsP.js";import{A}from"./AdminLayout-PFMD-RUe.js";import{X as k}from"./index.es-BmtGfkdq.js";import{B as v}from"./ButtonAdmin-DFHYROdf.js";import{s as m}from"./index-CEILWtln.js";import{M as n}from"./Modal-iN6Zw-8X.js";import{B as j}from"./Button-BgJxX_0z.js";/* empty css            */import"./emotion-unitless.esm-sScrWPmR.js";import"./ThemeProvider-DfRC6yqX.js";import"./setPrototypeOf-CL05xPcL.js";import"./divWithClassName-CvjRewxl.js";const c={"table-wrapper":"_table-wrapper_az8i5_1","sub-wrapper":"_sub-wrapper_az8i5_8","form-search":"_form-search_az8i5_14","icon-search":"_icon-search_az8i5_22","input-search":"_input-search_az8i5_30"},O=()=>{const{props:w}=E(),l=w.users,[C,h]=a.useState(!1),[d,y]=a.useState(null),[o,b]=a.useState(""),[u,f]=a.useState(l);a.useEffect(()=>{const s=l.filter(r=>r.username.toLowerCase().includes(o.toLowerCase())||r.nama.toLowerCase().includes(o.toLowerCase())||r.email.toLowerCase().includes(o.toLowerCase())||r.role.toLowerCase().includes(o.toLowerCase())||r.jenis_kelamin.toLowerCase().includes(o.toLowerCase())||r.no_telepon.toLowerCase().includes(o.toLowerCase()));f(s)},[o,l]);const x=()=>h(!1),_=(s,r)=>{s.preventDefault(),y(r),h(!0)},[t,p]=a.useState(!1),S=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),L=async()=>{try{const s=await U.delete(m("admin.user.destroy",{user:d.id}),{headers:{"X-CSRF-TOKEN":S,Accept:"application/json","Content-Type":"application/json"}});console.log("Delete successful",s),setShowDelete(!1),p(!t)}catch(s){console.error("Error deleting user",s)}p(!t)},g=[{name:"Name",selector:s=>s.nama},{name:"Username",selector:s=>s.username},{name:"Email",selector:s=>s.email},{name:"Role",selector:s=>s.role},{name:"Action",cell:s=>e.jsxs(e.Fragment,{children:[e.jsx(i,{href:m("admin.user.show",[s.id]),children:e.jsx("box-icon",{name:"info-circle",type:"solid",color:"#f16211"})}),e.jsx(i,{href:m("admin.user.edit",[s.id]),className:"mx-2",children:e.jsx("box-icon",{name:"edit",type:"solid",color:"#f16211"})}),e.jsx(i,{onClick:r=>_(r,s),style:{color:"#f16211"},children:e.jsx("box-icon",{name:"trash",type:"solid",color:"#f16211"})})]})}];return a.useEffect(()=>{t&&(console.log(t),f(l),N.reload(),p(!1))},[t,u]),e.jsxs(A,{title:"MANAJEMEN USER",children:[e.jsxs("div",{className:c["table-wrapper"],children:[e.jsxs("div",{className:c["sub-wrapper"],children:[e.jsx(i,{href:m("admin.user.create"),style:{textDecoration:"none"},children:e.jsxs(v,{variant:"danger",children:[e.jsx("box-icon",{color:"white",name:"plus"})," ",e.jsx("span",{children:"Tambah User"})]})}),e.jsxs("form",{action:"#",id:"form-search",className:c["form-search"],children:[e.jsx("span",{className:c["icon-search"],children:e.jsx("box-icon",{name:"search",color:"#f16211"})}),e.jsx("input",{type:"text",name:"search",id:"search",className:c["input-search"],placeholder:"Cari User",autoComplete:"off",value:o,onChange:s=>b(s.target.value)})]})]}),e.jsx(k,{columns:g,data:u,pagination:!0})]}),e.jsxs(n,{show:C,onHide:x,children:[e.jsx(n.Header,{closeButton:!0,children:e.jsx(n.Title,{children:"Delete User"})}),e.jsx(n.Body,{children:e.jsxs("p",{children:["Apakah anda yakin ingin menghapus user:"," ",e.jsx("b",{children:d&&d.nama}),"?"]})}),e.jsxs(n.Footer,{children:[e.jsx(j,{variant:"secondary",onClick:x,children:"Tutup"}),e.jsx("form",{onSubmit:L,children:e.jsx(j,{type:"submit",variant:"primary",style:{backgroundColor:"#f16211",borderColor:"#f16211"},children:"Ya, Hapus"})})]})]})]})};export{O as default};
