import{r as l,q as V,W as Z,j as e,a as T,y as $,b as ee}from"./app-CyaN6xsP.js";import{A as se}from"./AdminLayout-PFMD-RUe.js";import{X as te}from"./index.es-BmtGfkdq.js";import{B}from"./ButtonAdmin-DFHYROdf.js";import{s as z}from"./index-CEILWtln.js";import{R as u,C as c}from"./Row-CiQT7cFv.js";import{M as n}from"./Modal-iN6Zw-8X.js";import{T as ae}from"./Table-DnZwWSpL.js";import{B as F}from"./Button-BgJxX_0z.js";/* empty css            */import"./emotion-unitless.esm-sScrWPmR.js";import"./ThemeProvider-DfRC6yqX.js";import"./setPrototypeOf-CL05xPcL.js";import"./divWithClassName-CvjRewxl.js";const re="_search_38z2o_28",oe="_form_38z2o_11",le="_opsi_38z2o_105",ie="_deskripsi_38z2o_128",ne="_table_38z2o_146",de="_tr_38z2o_146",ce="_th_38z2o_146",me="_td_38z2o_151",r={"title-table":"_title-table_38z2o_1","form-search":"_form-search_38z2o_11","icon-search":"_icon-search_38z2o_19",search:re,"title-form":"_title-form_38z2o_43",form:oe,"input-merk":"_input-merk_38z2o_59","input-model":"_input-model_38z2o_60","input-gambar":"_input-gambar_38z2o_72","label-gambar":"_label-gambar_38z2o_83",opsi:le,"label-gambar-div":"_label-gambar-div_38z2o_109","img-preview":"_img-preview_38z2o_123",deskripsi:ie,table:ne,tr:de,th:ce,td:me};function ze({katalogs:m}){const[A,M]=l.useState(!1),[R,_]=l.useState(!1),[a,K]=l.useState(!1),[k,y]=l.useState(null),[L,w]=l.useState(!1),[I,q]=l.useState(""),[v,h]=l.useState(m),C=V().props.errors,{data:o,setData:g,put:he,post:H,delete:pe,processing:ue,errors:p}=Z({id:"",gambar:"",merk:"",model:"",deskripsi:""}),[G,j]=l.useState({id:"",gambar:"",merk:"",model:"",deskripsi:""});l.useEffect(()=>{C&&x(C)},[C]);const E=()=>M(!1),P=(t,s)=>{t.preventDefault(),M(!0),K(s)},N=()=>_(!1),U=(t,s)=>{t.preventDefault(),_(!0),K(s)},X=[{name:"Merk Motor",selector:t=>t.merk_model},{name:"Action",selector:t=>e.jsxs(e.Fragment,{children:[e.jsx(T,{href:"#",onClick:s=>P(s,t),style:{color:"#f16211"},children:e.jsx("box-icon",{name:"info-circle",type:"solid",color:"#f16211"})}),e.jsx(T,{href:"#",onClick:s=>Q(s,t),className:"mx-2",children:e.jsx("box-icon",{name:"edit",type:"solid",color:"#f16211"})}),e.jsx("button",{onClick:s=>U(s,t),style:{color:"#f16211"},children:e.jsx("box-icon",{name:"trash",type:"solid",color:"#f16211"})})]})}],O=t=>{const s=t.target.files[0];if(s){g(D=>({...D,gambar:s})),j(D=>({...D,gambar:s}));const i=new FileReader;i.onloadend=()=>{w(!0),y(i.result)},i.readAsDataURL(s)}},Q=(t,s)=>{t.preventDefault(),w(!1),g({id:s.id,merk:s.merk,model:s.model,deskripsi:s.deskripsi,gambar:""}),j({id:s.id,merk:s.merk,model:s.model,deskripsi:s.deskripsi,gambar:""}),y(s.gambar)},S=t=>{const{name:s,value:i}=t.target;g({...o,[s]:i}),j({...G,[s]:i})},[d,x]=l.useState({}),[b,f]=l.useState(!1),W=t=>{t.preventDefault();const s=o.id?"admin.katalog.update":"admin.katalog.store";o.id?($.post(z("admin.katalog.update",{katalog:o.id}),{_method:"PUT",method:"PUT",data:o,headers:{"Content-Type":"multipart/form-data","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},preserveScroll:!0,onBefore:()=>{console.log(o)},onSuccess:()=>{f(!0),console.log(b),h(response.data)},onError:()=>{console.log(p),console.log(o),x(p)}}),f(!0)):H(z(s),{data:o,preserveScroll:!0,onSuccess:()=>{f(!0),console.log(o)},onError:()=>{console.log(p),console.log(o),x(p)}})},Y=async()=>{try{const t=await ee.delete(z("admin.katalog.delete",{katalog:a.id}),{headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content"),"Content-Type":"application/json",Accept:"application/json"}});console.log("Berhasil dihapus",t),_(!1);const s=v.filter(i=>i.id!==a.id);h(s),f(!b)}catch(t){console.error("Gagal menghapus",t.response.data),x(t.response.data.errors)}},J=t=>{q(t.target.value);const s=m.filter(i=>i.merk.toLowerCase().includes(t.target.value.toLowerCase())||i.model.toLowerCase().includes(t.target.value.toLowerCase())||i.deskripsi.toLowerCase().includes(t.target.value.toLowerCase()));console.log(s),h(s)};return l.useEffect(()=>{h(m)},[m]),l.useEffect(()=>{x(p)},[p]),l.useEffect(()=>{h(m)},[m]),l.useEffect(()=>{b&&(h(m),g({id:"",gambar:"",merk:"",model:"",deskripsi:""}),j({id:"",gambar:"",merk:"",model:"",deskripsi:""}),w(!1),y(null),f(!1))},[b,v]),e.jsxs(se,{title:"Manajemen Katalog",children:[e.jsxs(u,{children:[e.jsxs(c,{md:6,style:{borderRight:"2px solid #f16211"},children:[e.jsx("h1",{className:r["title-table"],children:"Daftar Katalog"}),e.jsxs("form",{action:"#",id:"form-search",className:r["form-search"]+" d-flex justify-content-md-start",style:{width:"60%"},children:[e.jsx("span",{className:r["icon-search"],children:e.jsx("box-icon",{name:"search",color:"#f16211"})}),e.jsx("input",{type:"text",name:"search",id:"search",placeholder:"Cari Katalog",autoComplete:"off",className:r.search,value:I,onChange:J})]}),e.jsx(te,{columns:X,data:v,pagination:!0,responsive:!0,striped:!0,className:"table-striped"})]}),e.jsxs(c,{md:6,children:[e.jsx("div",{className:"form-merk-motor",children:e.jsx("h1",{className:r["title-form"],children:"Form Katalog"})}),e.jsxs("form",{id:"form",onSubmit:W,className:r.form,children:[e.jsx("input",{type:"hidden",name:"id",id:"id",value:o.id}),e.jsx(u,{className:"mb-3",children:e.jsxs(c,{md:{span:9,offset:1},children:[e.jsx("input",{type:"text",name:"merk",id:"merk",placeholder:"Merk Motor",autoComplete:"off",required:!0,value:o.merk,onChange:S,className:r["input-merk"]}),d.merk&&e.jsx("small",{className:"text-danger",children:d.merk})]})}),e.jsx(u,{children:e.jsxs(c,{md:{span:9,offset:1},children:[e.jsx("input",{type:"text",name:"model",id:"model",placeholder:"Model Motor",autoComplete:"off",required:!0,value:o.model,onChange:S,className:r["input-model"]}),d.model&&e.jsx("small",{className:"text-danger",children:d.model})]})}),e.jsxs(u,{className:"d-flex justify-content-center align-items-center my-3",children:[e.jsxs(c,{md:6,children:[e.jsx("input",{type:"file",name:"gambar",id:"gambar",accept:"image/*",style:{display:"none"},onChange:O,className:r["input-gambar"]+" gambar"}),e.jsxs("label",{htmlFor:"gambar",className:r["label-gambar"],children:[e.jsx("div",{className:r["label-gambar-div"],children:e.jsx("box-icon",{name:"plus",color:"#f16211"})}),"Tambah Gambar"]}),d.gambar&&e.jsx("small",{className:"text-danger",children:d.gambar})]}),e.jsx(c,{md:6,children:k?e.jsx("img",{src:L?k:"/storage/"+k,className:r["img-preview"],id:"img-preview",alt:""}):e.jsx("img",{src:"/images/preview.png",className:r["img-preview"],id:"img-preview",alt:"",width:"100px"})})]}),e.jsx(u,{className:"mb-4",children:e.jsxs(c,{md:{span:12},children:[e.jsx("textarea",{name:"deskripsi",id:"deskripsi",rows:"6",placeholder:"Deskripsi",autoComplete:"off",required:!0,value:o.deskripsi,onChange:S,className:r.deskripsi,children:o.deskripsi}),d.deskripsi&&e.jsx("small",{className:"text-danger",children:d.deskripsi})]})}),e.jsx(u,{children:e.jsx(c,{md:{span:8,offset:4},children:e.jsxs(B,{type:"submit",style:{background:"linear-gradient(90deg, #f16211 -14.33%, #e59a6f 85.67%)",fontSize:"20px",fontStyle:"normal",fontWeight:"700",textAlign:"center"},children:[e.jsx("box-icon",{name:"save",type:"solid",color:"#fff"})," ",e.jsx("span",{className:"ms-2",children:"SUBMIT"})]})})})]})]})]}),e.jsxs(n,{size:"lg",show:A,onHide:E,children:[e.jsx(n.Header,{closeButton:!0,children:e.jsx(n.Title,{children:"Detail Katalog"})}),e.jsxs(n.Body,{children:[e.jsxs("h2",{children:["Detail Data Katalog Motor"," ",e.jsx("span",{className:"title",children:a&&a.name})]}),e.jsx(ae,{borderless:!0,className:r.table,children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("th",{style:{width:"10%"},children:"Merk"}),e.jsx("td",{style:{width:"5px"},children:":"}),e.jsx("td",{children:a&&a.merk})]}),e.jsxs("tr",{children:[e.jsx("th",{style:{width:"10%"},children:"Model"}),e.jsx("td",{style:{width:"5px"},children:":"}),e.jsx("td",{className:"model",children:a&&a.model})]}),e.jsxs("tr",{children:[e.jsx("th",{style:{width:"10%"},children:"Deskripsi"}),e.jsx("td",{style:{width:"5px"},children:":"}),e.jsx("td",{className:"deskripsi",children:a&&a.deskripsi})]}),e.jsxs("tr",{children:[e.jsx("th",{style:{width:"10%"},children:"Gambar"}),e.jsx("td",{style:{width:"5px"},children:":"}),e.jsx("td",{className:"gambar-modal",children:a&&a.gambar?e.jsx("img",{src:"/storage/"+a.gambar,alt:"Image Preview Gambar Motor",className:r["img-preview-modal"],width:"200px"}):"Gambar tidak tersedia"})]})]})})]}),e.jsx(n.Footer,{children:e.jsx(F,{variant:"secondary",onClick:E,children:"Close"})})]}),e.jsxs(n,{show:R,onHide:N,children:[e.jsx(n.Header,{closeButton:!0,children:e.jsx(n.Title,{children:"Hapus Katalog"})}),e.jsx(n.Body,{children:e.jsxs("p",{children:["Apakah anda yakin ingin menghapus katalog:"," ",e.jsx("b",{children:a&&a.merk+" "+a.model}),"?"]})}),e.jsxs(n.Footer,{children:[e.jsx(F,{variant:"secondary",onClick:N,children:"Close"}),e.jsx("form",{onSubmit:Y,children:e.jsx(B,{type:"submit",variant:"primary",onClick:N,style:{backgroundColor:"#f16211",borderColor:"#f16211"},children:"Ya, Hapus"})})]})]})]})}export{ze as default};
